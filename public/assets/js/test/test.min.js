var apiData,typingTimer,fetchingData=1,valueListContainerHTML='\n                                <div class="col-12" id="value-list-container">\n                                    <label for="func-value">What value do you want to use?</label>\n                                    <input id="func-value" type="text" name="func-value" placeholder="Value">\n                                </div>\n',functionListContainerHTML='\n                                <div class="col-12" id="func-list-container">\n                                    <label for="function">What method do you want to test?</label>\n                                    <select name="function" id="func-list">\n                                        <option value="">- Select Function -</option>\n                                    </select>\n                                </div>\n',doneTypingInterval=100,validFunction=!1,validAPI=!1;function getAPIData(t){$.ajax({url:`/api/${t}/data`}).done(function(t){apiData=t}).fail(function(){return"Failure"})}function addOption(t){var e=$("#api-list"),n=document.createElement("option");n.setAttribute("value",t);var a=t;a=(a=a.replace(".json","")).replace(/_/g," "),n.textContent=a,e[0].insertAdjacentHTML("beforeend",n.outerHTML)}function updateForm(t){if(fetchingData)return!1;if(!checkSelection(t))return!1;var e=t[0].name.toString();e.match(/api/i)?(clearForm(!1),updateFunctionList()):e.match(/function/i)?updateValueList():e.match(/value-for/i)&&(validateAllParams()?enableSubmitButton():disableSubmitButton())}function updateFunctionList(){if(""==$("#api-list").val())return validAPI=!1,!1;addFunctionsToDropdown(getFunctionData())}function getFunctionData(){var t;return $.ajax({beforeSend:function(){fetchingData=1},url:"https://astudyinfutility.com/fancy/test/functions",dataType:"json",async:!1,method:"POST",data:$("#api-list").serialize(),success:function(e){t=e,fetchingData=0,validAPI=!0}}).fail(function(t,e,n){return fetchingData=0,"Failure"}),t}function addFunctionsToDropdown(t){$("#button-container")[0].insertAdjacentHTML("beforebegin",functionListContainerHTML);var e=$("#func-list");t.forEach(function(t){var n=`<option value="${t}">${t}</option>`;e[0].insertAdjacentHTML("beforeend",n)})}function updateValueList(){if(""==$("#func-list").val())return validFunction=!1,!1;addParametersToPage(getParameterData())}function getParameterData(){var t,e=$("#api-list").serialize()+"&"+$("#func-list").serialize();return $.ajax({beforeSend:function(){fetchingData=1},url:"https://astudyinfutility.com/fancy/test/parameters",dataType:"json",async:!1,method:"POST",data:e,success:function(e){t=e,fetchingData=0,validFunction=!0}}).fail(function(t,e,n){return fetchingData=0,"Failure"}),t}function addParametersToPage(t){var e=$("#button-container");t.forEach(function(t){var n,a=document.createElement("div");a.setAttribute("class","col-12"),a.setAttribute("id",`${t.name}-param-container`);var i="Value";i+=!0===(n=!!t.required)?"*":"",i+=" for the ",i+=t.name,i+=" method?";var r=document.createElement("label");r.setAttribute("for",t.name),r.setAttribute("name","Parameter Name"),r.setAttribute("id",`label-for-${t.name}`),r.textContent=i;var o=!0===n?"required-":"";o+=`value-for-${t.name}`;var u=document.createElement("input");u.setAttribute("name",o),u.setAttribute("type","text"),u.setAttribute("id",o),u.setAttribute("value",""),a.innerHTML+=r.outerHTML,a.innerHTML+=u.outerHTML,e[0].insertAdjacentHTML("beforebegin",a.outerHTML)})}function checkSelection(t){return!!t.attr("id").match(/value-for/)||(""!=t.val()||(disableSubmitButton(),!1))}function enableSubmitButton(){$("#submit-button").prop("disabled",!1)}function disableSubmitButton(){$("#submit-button").prop("disabled",!0)}function doneTyping(t){updateForm($(`#${t.id}`))}function validateAllParams(){var t=$('[id*="-param-"]'),e=(t.length,!1);return $.each(t,function(n){var a=t[n].id,i=$(`#${a}`).children("input");$.each(i,function(t){var n=$(`#${i[t].id}`);n.attr("id");n.attr("id").match(/required-value/)&&(e=""!=n.val())})}),e}function validateForms(){return!1}function displayResult(t){try{var e=JSON.parse(t),n=syntaxHighlight(JSON.stringify(e,void 0,4));$("#results-modal > pre").html(n),$("#results-modal").dialog("open")}catch(t){var a="There was an error formatting the result:\n";a+=t,$("#results-modal > pre").insertAdjacentHTML("beforeend",a)}return!1}function syntaxHighlight(t){return(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var e="number";return/^"/.test(t)?e=/:$/.test(t)?"key":"string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),'<span class="'+e+'">'+t+"</span>"})}function clearForm(t){t&&$("#api-list").val("");var e=$("#func-list-container"),n=$('[id*="-param-container"]');e.remove(),n.remove(),$("#submit-button").prop("disabled",!0)}$(document).ready(function(){$.ajax({beforeSend:function(){fetchingData=1},url:"https://astudyinfutility.com/fancy/api/list",dataType:"json"}).done(function(t){apiList=t,t.forEach(function(t){addOption(t)}),fetchingData=0}).fail(function(t,e,n){return fetchingData=0,"Failure"}),disableSubmitButton(),$("#api-list").change(function(){updateForm($("#api-list"))}),$("#form-row-container").on("change","#func-list-container",function(){updateForm($("#func-list"))}),$("#form-row-container").on("keyup","#value-list-container",function(){clearTimeout(typingTimer),typingTimer=setTimeout(doneTyping,doneTypingInterval)}),$("#form-row-container").on("keydown","#value-list-container",function(){clearTimeout(typingTimer)}),$("#form-row-container").on("keyup",'[id*="value-for"]',function(){clearTimeout(typingTimer);var t=this;typingTimer=setTimeout(function(){doneTyping(t)},doneTypingInterval)}),$("#form-row-container").on("keydown",'[id*="value-for"]',function(){clearTimeout(typingTimer)}),$("#results-modal").dialog({autoOpen:!1,resizable:!0,modal:!0,buttons:{Ok:function(){$(this).dialog("close")}},maxHeight:1200,maxWidth:1500,minHeight:200,minWidth:200,height:800,width:1e3}),$("#submit-button").click(function(){return $.ajax({beforeSend:validateForms(),url:"https://astudyinfutility.com/fancy/test",type:"POST",data:$("#api-selector").serialize(),success:function(t){displayResult(t)}}),!1}),$("#reset-button").click(function(){return clearForm(!0),!1})});