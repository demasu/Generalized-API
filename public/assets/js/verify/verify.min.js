var apiData,apiList;function getAPIData(e){$.ajax({url:`/api/${e}/data`}).done(function(e){apiData=e}).fail(function(){return"Failure"})}function checkSelection(e){return""==e.target.value?($("#submit-button").prop("disabled",!0),!1):($("#submit-button").prop("disabled",!1),!0)}function addOption(e){var t=$("#api-list"),n=document.createElement("option");n.setAttribute("value",e);var r=e;r=(r=r.replace(".json","")).replace(/_/g," "),n.textContent=r,t[0].insertAdjacentHTML("beforeend",n.outerHTML)}function generateTableContents(e){0!=$("#api-info-table").length&&$("#api-info-table").remove();var t=JSON.parse(e),n=document.createElement("div"),r=document.createElement("table"),a="";n.setAttribute("id","api-info-table"),r.setAttribute("id","api-data"),r.setAttribute("class","alt"),a+=generateColGroups(),a+=generateTableHeader();var o=generateStandardParts(t);t=o[0],a+=o[1],a+=generateFunctionHeader();var u=document.createElement("tbody");u.innerHTML+=generateFunctionBodyHeader(),$.each(t,function(e){var n=t[e].params,r=t[e].call,a=0;$.each(n,function(e){var t=document.createElement("tr"),o=generateParamRow(n[e],a);0==a?(t.innerHTML+=generateFunctionCallHeader(n,r),t.innerHTML+=o[0],t.innerHTML+=o[1]):(t.innerHTML+=o[0],t.innerHTML+=o[1]),u.innerHTML+=t.outerHTML,a++})}),a+=u.outerHTML,r.innerHTML+=a,n.innerHTML+=r.outerHTML,$("#form")[0].insertAdjacentHTML("afterend",n.outerHTML)}function generateStandardParts(e){var t=document.createElement("tbody");t.innerHTML+=generateRequiredHeader();var n=generateBaseURLRow(e);e=n[0],t.innerHTML+=n[1];var r=generateUsernameRow(e);e=r[0],t.innerHTML+=r[1];var a=generatePasswordRow(e);e=a[0],t.innerHTML+=a[1];var o=generateQueryRow(e);return e=o[0],t.innerHTML+=o[1],[e,t.outerHTML]}function generateRequiredHeader(){var e=document.createElement("tr"),t=document.createElement("th"),n=document.createElement("th"),r=document.createElement("th");return t.setAttribute("class","small-header left alt"),n.setAttribute("class","small-header alt"),r.setAttribute("class","small-header alt"),n.textContent="Parameter",r.textContent="Value",e.innerHTML+=t.outerHTML+n.outerHTML+r.outerHTML,e.outerHTML}function generateBaseURLRow(e){var t=document.createElement("tr"),n=document.createElement("td"),r=document.createElement("td"),a=document.createElement("td");return r.textContent="base_url",a.textContent=e.base_url,delete e.base_url,t.innerHTML+=n.outerHTML+r.outerHTML+a.outerHTML,[e,t.outerHTML]}function generateUsernameRow(e){var t=document.createElement("tr"),n=document.createElement("td"),r=document.createElement("td"),a=document.createElement("td");return r.textContent="username",a.textContent=e.username,delete e.username,t.innerHTML+=n.outerHTML+r.outerHTML+a.outerHTML,[e,t.outerHTML]}function generatePasswordRow(e){var t=document.createElement("tr"),n=document.createElement("td"),r=document.createElement("td"),a=document.createElement("td");return r.textContent="password",a.textContent=e.password.replace(/./g,"*"),delete e.password,t.innerHTML+=n.outerHTML+r.outerHTML+a.outerHTML,[e,t.outerHTML]}function generateQueryRow(e){var t=document.createElement("tr"),n=document.createElement("td"),r=document.createElement("td"),a=document.createElement("td");return r.textContent="query_method",a.textContent=e.query_method,delete e.query_method,t.innerHTML+=n.outerHTML+r.outerHTML+a.outerHTML,[e,t.outerHTML]}function generateParamRow(e,t){var n=document.createElement("td"),r=document.createElement("td");return t%2!=0&&n.setAttribute("class","cell-no-left"),n.textContent=e.name,"on"==e.required?r.textContent="(required)":r.textContent="(optional)",[n.outerHTML,r.outerHTML]}function generateColGroups(){var e=document.createElement("colgroup"),t=document.createElement("col");return e.innerHTML+=t.outerHTML+t.outerHTML+t.outerHTML,e.outerHTML}function generateTableHeader(){var e=document.createElement("thead"),t=document.createElement("tr");t.setAttribute("class","header-row");var n=document.createElement("th"),r=document.createElement("h4");return n.setAttribute("colspan","3"),n.setAttribute("scope","colgroup"),n.setAttribute("class","big-header"),r.textContent="RequiredParameters",n.innerHTML+=r.outerHTML,t.innerHTML+=n.outerHTML,e.innerHTML+=t.outerHTML,e.outerHTML}function generateFunctionHeader(){var e=document.createElement("tbody"),t=document.createElement("tr"),n=document.createElement("th"),r=document.createElement("h4");return n.setAttribute("colspan","3"),n.setAttribute("scope","colgroup"),n.setAttribute("class","big-header alt"),t.setAttribute("class","header-row"),r.textContent="Functions",n.innerHTML+=r.outerHTML,t.innerHTML+=n.outerHTML,e.innerHTML+=t.outerHTML,e.outerHTML}function generateFunctionBodyHeader(){var e=document.createElement("tr"),t=document.createElement("th"),n=document.createElement("th"),r=document.createElement("th");return t.setAttribute("class","small-header left"),n.setAttribute("class","small-header"),r.setAttribute("class","small-header"),n.textContent="Parameter",r.textContent="Value",e.innerHTML+=t.outerHTML+n.outerHTML+r.outerHTML,e.outerHTML}function generateFunctionCallHeader(e,t){var n=document.createElement("th"),r=Object.keys(e).length;return n.setAttribute("rowspan",r),n.setAttribute("scope","rowgroup"),n.setAttribute("class","func-header"),n.textContent=t,n.outerHTML}$(document).ready(function(){$.ajax({url:"/api/list",dataType:"json"}).done(function(e){apiList=e,e.forEach(function(e){addOption(e)})}).fail(function(){return console.log("Failure happened"),"Failure"}),$("#submit-button").prop("disabled",!0),$("#submit-button").click(function(e){return $.ajax({url:"/verify",type:"POST",data:$("#api-selector").serialize(),success:function(e){generateTableContents(e)}}),!1}),$("#api-list").change(function(e){checkSelection(e)})});